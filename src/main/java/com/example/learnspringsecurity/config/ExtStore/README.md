1. Сделать регистрацию, дать к ней доступ всем, обеспечить сущность для хранения пользователей (логин, хеш пароля, роли)
2. Сделать бин с энкодером (разумно BCrypt)
3. SS понимает пользователей в виде UserDetails, сделать класс с имплементацией который будет создаваться из нашей сущности
3а. Роли нужные SS не строкой а в виде GrantedAuthority, самое порстое возвращать new SimpleGrantedAuthority("ROLE_ТутИмяРоли");
4. Сделать сервис с реализацией UserDetailsService который по логину будет возвращать этот самый UserDetails
5. Заавтовайрить этот сервис в конфиг SS и указать этот сервис для AuthenticationManagerBuilder через userDetailsService(БинСервисаСюда) и после него обязательно передать энкодер для паролей.
